<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Martin Jambon, June 2020" />
  <title>Dynamic Signal Uniformization</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="../blog.css" />
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <meta name=viewport content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Language" content="en">
</head>
<body>

<header id="title-block-header">
<h1 class="title">Dynamic Signal Uniformization</h1>
<p class="author">Martin Jambon, June 2020</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#problem"><span class="toc-section-number">1</span> Problem</a></li>
<li><a href="#outline-of-the-solution"><span class="toc-section-number">2</span> Outline of the solution</a>
<ul>
<li><a href="#tracker"><span class="toc-section-number">2.1</span> Tracker</a></li>
</ul></li>
<li><a href="#results"><span class="toc-section-number">3</span> Results</a></li>
<li><a href="#sample-implementation"><span class="toc-section-number">4</span> Sample implementation</a></li>
</ul>
</nav>
<!-- toc -->
<p>This article presents a heuristic for mapping a real-valued random signal that follows an arbitrary distribution to a uniform distribution over [0,1]. Itâ€™s based on maintaining <span class="math inline">\(n\)</span> bins, each representing an equal slice of the distribution. The average values of the bins are used to define a piecewise linear mapping from the original distribution to the uniform distribution. The result is a function that normalizes any input signal onto [0, 1]. It also has the ability to adjust to changes in the distribution over time. A usage scenario is the normalization of ratings given by a particular judge into scores that can be compared from one judge to another, regardless of how harsh or generous the judges are.</p>
<h1 data-number="1" id="problem" data-number="1"><span class="header-section-number">1</span> Problem</h1>
<p>We are concerned with the practical problem of normalizing ratings from an external source into consistent scores with a universal meaning. An external source might be a human assigning some sort of ratings or feedback, using a subjective scale. We would like to normalize those ratings such that their value has the same meaning,</p>
<ol type="1">
<li>regardless of the distribution of the original ratings from a particular source, and</li>
<li>regardless of changes in the distribution over time.</li>
</ol>
<p>The meaning of a score shall be its normalized rank or percentile, expressed as a value in the range [0, 1]. For example, if 23% of the input ratings are below 8.5 and the remaining 77% of ratings are above 8.5, then the normalized score for 8.5 is 0.23. Our goal is to build a function that takes input ratings and maps them to such normalized score. Input ratings are used in two ways:</p>
<ul>
<li>to build a model of the distribution of the input signal;</li>
<li>to be mapped into a normalized score using the modeled distribution.</li>
</ul>
<p>This article focuses on the main idea behind the solution. The more tedious work such as the initialization phase or handling interpolation at the extremities of the distribution is published as part of the source code for our implementation.</p>
<h1 data-number="2" id="outline-of-the-solution" data-number="2"><span class="header-section-number">2</span> Outline of the solution</h1>
<p>Given a stream of input numbers, we have to build and maintain some data structure that models the input distribution. We shall call it the distribution tracker. We add new samples to the tracker in order to improve or update the model. We also want to obtain a normalized score by passing in a sample input without necessarily updating the tracker.</p>
<h2 data-number="2.1" id="tracker" data-number="2.1"><span class="header-section-number">2.1</span> Tracker</h2>
<p>The algorithm uses two main parameters:</p>
<ul>
<li><span class="math inline">\(\alpha\)</span>, the number within (0, 1) used in the computation of a exponential moving average (EMA) for each bin;</li>
<li>a number of bins <span class="math inline">\(n\)</span>, each representing an equal slice of the distribution.</li>
</ul>
<h1 data-number="3" id="results" data-number="3"><span class="header-section-number">3</span> Results</h1>
<p>EMA <span class="math inline">\(\alpha\)</span> = 0.2, number of bins = 20</p>
<p>Input:</p>
<p><a href="img/input.png"
   title="Click to enlarge"><img
     src="img/input.png"
     alt="Distribution of the sample input data"/></a></p>
<p>Output:</p>
<p><a href="img/output.png"
   title="Click to enlarge"><img
     src="img/output.png"
     alt="Distribution of the sample output data"/></a></p>
<h1 data-number="4" id="sample-implementation" data-number="4"><span class="header-section-number">4</span> Sample implementation</h1>
<p><a href="https://github.com/mjambon/uniformize">https://github.com/mjambon/uniformize</a></p>
<p class="menu footer">
  <a href="https://twitter.com/mjambon">@mjambon</a> 2020-06-28<br/>
  <a href="/">Index</a>
</p>
</body>
</html>
